# 掲示板CRUD機能テストガイド

## 事前準備

### 必要なテストアカウント
1. **テストユーザー1**
   - メール: test1@example.com
   - パスワード: Test1234!
   - 名前: テストユーザー1

2. **テストユーザー2**
   - メール: test2@example.com  
   - パスワード: Test5678!
   - 名前: テストユーザー2

### 開発サーバーの起動
```bash
npm run dev
```
ブラウザで http://localhost:3000 にアクセス

---

## テスト項目と手順

### 1. 未ログイン時のアクセス制限テスト

**手順:**
1. ログアウトした状態で http://localhost:3000 にアクセス
2. 自動的にログインページ（/auth/signin）にリダイレクトされることを確認

**チェックポイント:**
- ✅ 未ログイン時は自動的にログインページへリダイレクト
- ✅ URLに `/auth/signin` が表示される

---

### 2. 投稿の作成と表示テスト

**手順:**
1. テストユーザー1でログイン
2. 「新規投稿」ボタンをクリック
3. 以下の内容で投稿を作成:
   - タイトル: 「テスト投稿1」
   - 本文: 「これはテスト投稿です。」
4. 「投稿する」ボタンをクリック

**チェックポイント:**
- ✅ 投稿が正常に作成される
- ✅ 投稿一覧に新しい投稿が表示される
- ✅ 投稿者名が「テストユーザー1」と表示される
- ✅ 「あなたの投稿」タグが表示される
- ✅ 投稿時刻が「たった今」と表示される

---

### 3. 投稿一覧の表示テスト（新着順）

**手順:**
1. さらに2つの投稿を作成:
   - 投稿2: タイトル「テスト投稿2」
   - 投稿3: タイトル「テスト投稿3」
2. ホームページをリロード

**チェックポイント:**
- ✅ 投稿が新着順（投稿3 → 投稿2 → 投稿1）に表示される
- ✅ 各投稿に「詳細を見る」ボタンが表示される
- ✅ 自分の投稿には「編集」と「削除」ボタンが表示される

---

### 4. 投稿詳細表示テスト

**手順:**
1. 任意の投稿の「詳細を見る」ボタンをクリック
2. 投稿詳細ページが表示されることを確認

**チェックポイント:**
- ✅ 投稿のタイトルが完全に表示される
- ✅ 投稿の本文が完全に表示される（省略なし）
- ✅ 投稿者情報（名前、アバター）が表示される
- ✅ 投稿日時が表示される
- ✅ いいねボタンが表示される

---

### 5. 自分の投稿の編集テスト

**手順:**
1. 自分の投稿の「編集」ボタンをクリック
2. タイトルを「編集済みテスト投稿1」に変更
3. 本文を「編集されたテスト投稿内容です。」に変更
4. 「更新する」ボタンをクリック

**チェックポイント:**
- ✅ 編集フォームに既存の内容が表示される
- ✅ 変更が正常に保存される
- ✅ 投稿一覧に「(編集済み)」マークが表示される
- ✅ 更新後、ホームページにリダイレクトされる

---

### 6. 自分の投稿の削除テスト

**手順:**
1. 自分の投稿の削除ボタン（ゴミ箱アイコン）をクリック
2. 確認ダイアログで「OK」をクリック

**チェックポイント:**
- ✅ 確認ダイアログが表示される
- ✅ 削除後、投稿が一覧から消える
- ✅ エラーが発生しない

---

### 7. 他人の投稿の編集・削除不可テスト

**手順:**
1. テストユーザー1でログアウト
2. テストユーザー2でログイン
3. 新規投稿を作成（タイトル: 「ユーザー2の投稿」）
4. テストユーザー2でログアウト
5. テストユーザー1で再度ログイン
6. 「ユーザー2の投稿」を確認

**チェックポイント:**
- ✅ 他人の投稿には「編集」「削除」ボタンが表示されない
- ✅ 他人の投稿には「あなたの投稿」タグが表示されない
- ✅ URLを直接入力しても編集ページにアクセスできない
  - テスト: `/posts/[投稿ID]/edit` に直接アクセス
  - 期待結果: エラーまたはリダイレクト

---

### 8. 文字数制限のテスト

**手順:**
1. 新規投稿フォームを開く
2. 以下のパターンをテスト:

#### 8.1 タイトルの文字数制限（100文字）
- 100文字ちょうどのタイトル → ✅ 投稿可能
- 101文字のタイトル → ❌ エラーメッセージ表示

#### 8.2 本文の文字数制限（1000文字）
- 1000文字ちょうどの本文 → ✅ 投稿可能
- 1001文字の本文 → ❌ エラーメッセージ表示

#### 8.3 空白のバリデーション
- タイトルが空 → ❌ 「タイトルを入力してください」
- 本文が空 → ❌ 「本文を入力してください」
- スペースのみ → ❌ エラーメッセージ表示

**チェックポイント:**
- ✅ 適切なエラーメッセージが表示される
- ✅ 文字数カウンターが正しく動作する
- ✅ 制限内であれば正常に投稿できる

---

### 9. いいね機能のテスト

**手順:**
1. テストユーザー1でログイン
2. 投稿のハートアイコンをクリック
3. 再度クリックしていいねを取り消す

**チェックポイント:**
- ✅ いいねすると赤いハートに変わる
- ✅ いいね数が増減する
- ✅ ページをリロードしても状態が保持される
- ✅ 自分の投稿にもいいねできる

---

### 10. ユーザープロフィール表示テスト

**手順:**
1. 投稿の投稿者名またはアバターをクリック
2. ユーザープロフィールモーダルが表示されることを確認

**チェックポイント:**
- ✅ ユーザー名、メールアドレスが表示される
- ✅ 登録日が表示される
- ✅ モーダルの外側をクリックで閉じられる

---

## パフォーマンステスト

### ページネーション動作確認
1. 11件以上の投稿を作成
2. ページネーションボタンが表示されることを確認
3. 次のページへの遷移が正常に動作することを確認

**チェックポイント:**
- ✅ 1ページに10件ずつ表示される
- ✅ ページ番号が正しく表示される
- ✅ 前へ/次へボタンが適切に有効/無効になる

---

## エラーハンドリングテスト

### ネットワークエラーのシミュレーション
1. 開発者ツールのNetworkタブでオフラインモードに設定
2. 投稿の作成を試みる

**チェックポイント:**
- ✅ 適切なエラーメッセージが表示される
- ✅ アプリケーションがクラッシュしない

---

## テスト完了チェックリスト

- [ ] 未ログイン時のアクセス制限 
- [ ] 投稿の作成
- [ ] 投稿の表示（一覧・詳細）
- [ ] 投稿の編集（自分の投稿のみ）
- [ ] 投稿の削除（自分の投稿のみ）
- [ ] 他人の投稿の編集・削除不可
- [ ] 文字数制限の動作
- [ ] いいね機能
- [ ] ユーザープロフィール表示
- [ ] ページネーション
- [ ] エラーハンドリング

すべての項目にチェックが入れば、CRUD機能のテスト完了です！